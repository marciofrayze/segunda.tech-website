
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="spt-exercise.html">
<link rel="import" href="spt-question.html">

<link rel="import" href="spt-footer.html">

<dom-module id="my-view5">
  <template>
    <style include="shared-styles">
        paper-button {
            margin-left: 2em;
        }

        paper-button.indigo {
            background-color: var(--paper-indigo-500);
            color: white;
            --paper-button-raised-keyboard-focus: {
            background-color: var(--paper-pink-a200) !important;
            color: white !important;
            };
        }
        paper-button.indigo:hover {
            background-color: var(--paper-indigo-400);
        }
        paper-button.indigo[disabled] {
          background-color: var(--paper-indigo-100);
        }
    </style>

    <div class="card">
      <h1>Exercício [[currentQuestionNumber]]</h1>

      enabled: {{_isNextQuestionEnabled(currentQuestionNumber, isAsnwerSelected)}}<br />
      isAsnwerSelected: {{isAsnwerSelected}}<br />
      this.currentQuestionNumber: {{currentQuestionNumber}} <br />
      this.questions.length: {{questions.length}}<br />
      _isNextQuestionEnabled(currentQuestionNumber, isAsnwerSelected): {{_isNextQuestionEnabled(currentQuestionNumber, isAsnwerSelected)}}

      <spt-exercise
        title="Colocar Titulo da questao aqui"
        questions="{{_currentQuestion(currentQuestionNumber)}}"
        correct="{{isCorrect}}"
        selected="{{isAsnwerSelected}}">
      </spt-exercise>

      <paper-button raised 
                    class="indigo"
                    on-tap="_nextButtonPressed"
                    disabled$="{{!_isNextQuestionEnabled(currentQuestionNumber, isAsnwerSelected)}}">Próxima</paper-button>

      <spt-footer></spt-footer>

    </div>

  </template>

  <script>
    class MyView5 extends Polymer.Element {
      static get is() { return 'my-view5'; }

      static get properties() {
          return {
            currentQuestionNumber: {
              type: Number,
              value: 1,
              observer: '_isNextQuestionEnabled'
            },
            isAsnwerSelected: {
              type: Boolean
            },
            show: {
              type: Boolean,
              value: true         
            },
            questions: {
              // Assinale a alternativa que completa corretamente a seguinte frase: Paradigmas de programação...
              type: Array,
              value: [ [{ "text": "são linguagens de programação."},
                        { "text": "são modelos de negócio." },
                        { "text": "não podem ser misturados uns com outros."},
                        { "text": "são formas ou modelos de como implementar softwares.", "isCorrect": true },
                        { "text": "são códigos de programação." }],

                       [{ "text": "resposta de outra questao1."},
                        { "text": "resposta de outra questao2." },
                        { "text": "resposta de outra questao3."},
                        { "text": "resposta de outra questao4.", "isCorrect": true },
                        { "text": "resposta de outra questao5." }],                        
                       ]
            }
          }         
        }

      static get observers() {
        return ['_currentQuestion()', '_isNextQuestionEnabled(currentQuestionNumber, isAsnwerSelected)']
      }

      _nextButtonPressed() {
        this.currentQuestionNumber++;
      }

      _isNextQuestionEnabled(currentQuestionNumber, isAsnwerSelected) {
        
        console.log("_isNextQuestionEnabled");
        console.log("isAsnwerSelected: " + isAsnwerSelected);

        return ( (isAsnwerSelected == true) && 
                 (currentQuestionNumber < this.questions.length) );
      }

      _currentQuestion(currentQuestionNumber) {
        console.log("_currentQuestion. this.currentQuestionNumber = ", currentQuestionNumber)
        console.log("this.questions[this.currentQuestionNumber - 1] = ", this.questions[currentQuestionNumber - 1])
        return this.questions[currentQuestionNumber - 1];
      }

    }

    window.customElements.define(MyView5.is, MyView5);
  </script>
</dom-module>
